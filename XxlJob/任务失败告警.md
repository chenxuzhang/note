##### 告警触发入口

```java
public class JobFailMonitorHelper {
 public void start(){
  monitorThread = new Thread(new Runnable() {
   ...
     
   // 哪些场景会触发 alarm(...) 的执行 1和2是并且的关系
   // 1、调度失败(调用执行器成功,执行器返回失败code) or 执行器执行失败并且成功上报给任务调度中心
   // 2、没有进行过报警的`xxl_job_log`记录
       
   // 告警状态：0-默认、-1=锁定状态、1-无需告警、2-告警成功、3-告警失败
   int newAlarmStatus = 0;
   boolean alarmResult = XxlJobAdminConfig.getAdminConfig().getJobAlarmer().alarm(info, log);
   newAlarmStatus = alarmResult?2:3;
   ...
  });
 }
}
```



##### 告警拓展功能

```java
package com.xxl.job.admin.core.alarm;
@Component
public class JobAlarmer implements ApplicationContextAware, InitializingBean {
 private static Logger logger = LoggerFactory.getLogger(JobAlarmer.class);

 private ApplicationContext applicationContext;
 private List<JobAlarm> jobAlarmList;

 @Override
 public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
  this.applicationContext = applicationContext;
 }

 @Override
 public void afterPropertiesSet() throws Exception {
  Map<String, JobAlarm> serviceBeanMap = applicationContext.getBeansOfType(JobAlarm.class);
  if (serviceBeanMap != null && serviceBeanMap.size() > 0) {
   jobAlarmList = new ArrayList<JobAlarm>(serviceBeanMap.values());
  }
 }

 public boolean alarm(XxlJobInfo info, XxlJobLog jobLog) {
  boolean result = false;
  if (jobAlarmList!=null && jobAlarmList.size()>0) {
   result = true;  // success means all-success
   for (JobAlarm alarm: jobAlarmList) {
    boolean resultItem = false;
    try {
     resultItem = alarm.doAlarm(info, jobLog);
    } catch (Exception e) {
     logger.error(e.getMessage(), e);
    }

    if (!resultItem) {
     result = false;
    }
   }
  }
  return result;
 }
}
```



##### 拓展接口

```
```



